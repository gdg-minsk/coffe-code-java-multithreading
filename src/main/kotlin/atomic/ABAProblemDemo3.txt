CAS работает успешно, даже если значение общей переменной изменяется с A на B, а затем обратно на A.
Рассмотрим следующую последовательность:

1. Поток T1 считывает значение общей переменной как A и желает изменить его на B. После прочтения
значения переменной поток
2. T1 подвергается переключению контекста. Другой поток, T2, меняет значение общей переменной с A на B,
а затем обратно на A из B.
3. Поток T1 снова запланирован для выполнения и вызывает CAS с A в качестве ожидаемого значения и B в
качестве нового значения. CAS завершается успешно, поскольку текущее значение переменной равно A,
хотя оно изменилось на B, а затем снова на A в потоке времени T1, в котором был переключен контекст.